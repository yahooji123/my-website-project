<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Design Thinking Quiz (1-40)</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f6f8fa; margin:0; padding:20px; color:#111; }
    .container { max-width:1000px; margin:20px auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 6px 24px rgba(0,0,0,0.08); }
    h1 { text-align:center; margin:0 0 12px 0; font-size:24px; }
    .meta { text-align:center; color:#555; margin-bottom:16px; }
    .controls { text-align:center; margin-bottom:16px; }
    button { margin:6px 6px; padding:10px 16px; font-size:15px; border:none; border-radius:6px; cursor:pointer; }
    .submit { background:#28a745; color:white; }
    .retry { background:#007bff; color:white; }
    .reset { background:#dc3545; color:white; }
    .question { margin-bottom:18px; padding:12px; border-radius:8px; border:1px solid #e6e9ee; background:#fcfeff; }
    .qtitle { margin:0 0 8px 0; font-weight:600; }
    .options label { display:block; margin:6px 0; padding:8px; border-radius:6px; cursor:pointer; border:1px solid transparent; }
    .options input { margin-right:8px; transform:scale(1.05); }
    .explain { margin-top:8px; font-size:14px; color:#222; }
    #resultSummary { margin:12px 0; padding:12px; border-radius:8px; background:#f1f7ff; border:1px solid #d7e6ff; font-weight:600; }
    .option-correct { background:#d4edda; border-color:#c3e6cb !important; } /* green */
    .option-wrong { background:#f8d7da; border-color:#f5c6cb !important; }   /* red */
    .option-neutral { background:transparent; }
    .per-question-result { margin-top:8px; padding:10px; border-radius:6px; }
    .per-correct { background:#e9f7ef; border:1px solid #c8e6c9; }
    .per-wrong { background:#fdecea; border:1px solid #f5c6cb; }
    .small { font-size:13px; color:#444; }
    /* responsive */
    @media (max-width:600px){
      .container{padding:12px;}
      button{width:100%; margin:8px 0;}
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Design Thinking Quiz — Questions 1–40</h1>
    <div class="meta">Questions shown in English + Hindi. Select answer(s) and click <b>Submit Test</b>.</div>
    <div class="controls">
      <button type="button" class="submit" id="submitBtn">Submit Test</button>
      <button type="button" class="retry" id="retryBtn">Retry Wrong Only</button>
      <button type="button" class="reset" id="resetBtn">Reset Answers</button>
    </div>

    <form id="quizForm"></form>

    <div id="resultSummary" style="display:none;"></div>
  </div>

  <script>
    // Full 1-40 bilingual questions, options, answers and Hindi explanations.
    const questions = [
      { q: "What is a mnemonic to remember the stages of Karmic Design Thinking? <br>कर्मिक डिज़ाइन थिंकिंग के चरणों को याद रखने का उपाय (mnemonic) क्या है?",
        options: ["EAST - ईस्ट","BEST - बेस्ट","DMAIC - डीएमएआईसी","EDIPT - एडीआईपीटी"],
        answer: [0], exp: "Mnemonic EAST है। (E – Empathize, A – Analyze, S – Solve, T – Test)" },

      { q: "How is Karmic Design Thinking different from IDEO or Stanford's model? <br>कर्मिक डिज़ाइन थिंकिंग IDEO या स्टैनफोर्ड के मॉडल से कैसे अलग है?",
        options: ["4 stages instead of 5 (5 की जगह 4 चरण)","Philosophical instead of scientific (वैज्ञानिक की जगह दार्शनिक)","Heart instead of brain (दिमाग की जगह दिल)","Monday instead of Tuesday (सोमवार की जगह मंगलवार)"],
        answer: [0], exp: "कर्मिक मॉडल में 4 चरण होते हैं, जबकि IDEO/Stanford में 5 चरण।" },

      { q: "Why did Curio fail in his attempt at his presentation to the customer? <br>क्यूरियो अपनी प्रस्तुति में ग्राहक के सामने क्यों असफल रहा?",
        options: ["He hadn't followed a systematic process to understand the requirements - उसने आवश्यकताएँ समझने के लिए व्यवस्थित प्रक्रिया नहीं अपनाई","He wanted a shortcut to success - वह शॉर्टकट चाहता था","His customer was not stable - उसका ग्राहक अस्थिर था","He had too many assumptions - उसने बहुत अनुमान लगा लिए"],
        answer: [0], exp: "Curio ने ग्राहक की जरूरतों को समझने के लिए systematic process follow नहीं किया।" },

      { q: "Eggomobile is an example of a product designed for: <br>एग्गोमोबाइल किस प्रकार के ग्राहकों के लिए डिज़ाइन किया गया उदाहरण है?",
        options: ["Customers who are very different from us - वे ग्राहक जो हमसे बहुत अलग हैं","People who want cake and eat it too - जो सब कुछ चाहते हैं","Engineers who can imagine the future - भविष्य के इंजीनियर","Students to learn creativity - रचनात्मकता सीखने वाले छात्र"],
        answer: [0], exp: "Eggomobile उन ग्राहकों के लिए डिज़ाइन है जो हमसे बहुत अलग हैं।" },

      { q: "What is common between what was said 2500 years ago and this course? <br>2500 साल पहले कही गई बात और इस कोर्स में क्या समानता है?",
        options: ["The same human-centred philosophy spans millennia - समान मानव-केंद्रित दर्शन","Human needs are same across millennia - मानव आवश्यकताएँ समान हैं","Politics, sports, literature same - राजनीति/खेल/साहित्य समान हैं","Being famous meant relatability - प्रसिद्धि = जुड़ाव"],
        answer: [0], exp: "मानव-केंद्रित दर्शन हजारों सालों से अनुप्राणित है।" },

      { q: "Design Thinking starts with: <br>डिज़ाइन थिंकिंग किससे शुरू होता है?",
        options: ["Sticky notes - स्टिकी नोट्स","Sketching - स्केचिंग","Understanding of human needs - मानव ज़रूरतों की समझ","Identifying solutions - समाधान पहचानना"],
        answer: [2], exp: "Design Thinking हमेशा human needs समझने से शुरू होता है।" },

      { q: "Which of the below firms is associated the most with Design Thinking? <br>निम्नलिखित में से किस संस्था का डिज़ाइन थिंकिंग से सबसे अधिक संबंध है?",
        options: ["IHM","Interaction Design Foundation","International Design Foundation","I-PAC"],
        answer: [1], exp: "Interaction Design Foundation Design Thinking से संबंधित है।" },

      { q: "The customer journey map allows you to think about the steps or milestones of a process. <br>कस्टमर जर्नी मैप आपको प्रक्रिया के चरणों पर सोचने की अनुमति देता है।",
        options: ["True - सही","False - ग़लत"],
        answer: [0], exp: "Customer journey map प्रक्रिया के milestones समझने में मदद करता है।" },

      { q: "Which of the following is to be followed if we are to empathize with users? <br>यूज़र्स के साथ सहानुभूति करने के लिए नीचे से क्या पालन किया जाना चाहिए?",
        options: ["Leave our assumptions behind - अपने अनुमान छोड़ दें","Collect data from small group - छोटे समूह से डेटा इकट्ठा करें","Use own insights - अपनी अंतर्दृष्टि उपयोग करें","Check education history - शिक्षा इतिहास जाँचें"],
        answer: [0], exp: "Empathy का मतलब है अपनी assumptions पीछे छोड़कर यूज़र की नज़र से देखना।" },

      { q: "Design thinking is a ____ method of solving problems. <br>डिज़ाइन थिंकिंग समस्याएं हल करने का ____ तरीका है।",
        options: ["Learning-based - सीखने पर आधारित","Systematic - व्यवस्थित","Topsy-turvy - उल्टा-पुल्टा","Anarchic - अराजक"],
        answer: [1], exp: "Design Thinking एक systematic तरीका है।" },

      { q: "Which organization coined the concept and term of Multi-Whys? <br>‘Multi-Whys’ की अवधारणा और शब्द किसने गढ़ा?",
        options: ["Tesla","Tata","Toyota","Toblerone"],
        answer: [2], exp: "Toyota ने Multi-Why concept दिया।" },

      { q: "Which sequence would a wise Design Thinking Expert most likely follow? <br>एक समझदार Design Thinking विशेषज्ञ सबसे संभावित कौन सा क्रम अपनाएगा?",
        options: ["Multi-Why → Conflict of Interest → Solve","Conflict → HMW → Multi-Why","Test → Feedback → Multi-Why","EMV → Multi-Why → Prototype"],
        answer: [0], exp: "सही क्रम: Multi-Why → Conflict of Interest → Solve।" },

      { q: "Which of the following would qualify as a Conflict of Interest? <br>निम्नलिखित में से कौन Conflict of Interest माने जाएंगे?",
        options: ["Supportive family - सहायक परिवार","Rebellious children want costly festivals - विद्रोही बच्चे महंगे त्यौहार चाहते हैं","Children apply for jobs - बच्चे नौकरी के लिए आवेदन करते हैं","Children want to be artists vs family wants doctors - बच्चे कलाकार बनना चाहते हैं पर परिवार डॉक्टर चाहता है"],
        answer: [1,3], exp: "जब बच्चों की इच्छाएँ और परिवार की अपेक्षाएँ टकराती हैं तो यह Conflict है।" },

      { q: "According to Dr. Bala Ramadurai, how should Conflict of Interest be dealt with? <br>डॉ. बाला रामदुराई के अनुसार Conflict of Interest को कैसे निपटाया जाना चाहिए?",
        options: ["By EMV","By loopholes","By ENV Model","Avoid it"],
        answer: [2], exp: "Conflict को ENV Model से निपटना चाहिए।" },

      { q: "Which Multi-Why question does NOT fit? <br>कौन सा Multi-Why प्रश्न फिट नहीं बैठता?",
        options: ["Why is she falling sick? - वह क्यों बीमार हो रही है?","Why is she eating improper food? - वह गलत खाना क्यों खा रही है?","Why does poverty exist? - गरीबी क्यों मौजूद है?","Why can't she afford healthy food? - वह स्वस्थ भोजन क्यों नहीं खरीद सकती?"],
        answer: [2], exp: "'Why does poverty exist?' बहुत व्यापक (broad) प्रश्न है और Multi-Why में फिट नहीं बैठता।" },

      { q: "When we analyze the problem from both perspectives (customer and provider), which tool are we using? <br>जब हम समस्या को दोनों पक्षों (ग्राहक और प्रदाता) से जांचते हैं तो कौन सा टूल उपयोग कर रहे होते हैं?",
        options: ["Conflict Of Interest - हितों का टकराव","Bone of Contention - विवाद की जड़","Argument - तर्क","Difference of Opinion - मतभेद"],
        answer: [0], exp: "दोनों नजरियों से देखने पर Conflict Of Interest tool उपयोग होता है।" },

      { q: "Spot the odd one out in Analyze phase: <br>Analyze चरण में 'odd one out' कौन सा है?",
        options: ["Multi-Why Analysis","Conflict of Interest","How-Might-We","Solution generation"],
        answer: [3], exp: "Solution generation Solve phase में आता है, Analyze में नहीं।" },

      { q: "Which factor does NOT affect the number of levels for Multi-Why analysis? <br>Multi-Why analysis के स्तरों की संख्या को कौन-सा factor प्रभावित नहीं करता?",
        options: ["Natural phenomenon - प्राकृतिक घटना","Mood of subject - विषय का मूड","Domain expertise - डोमेन विशेषज्ञता","Administrative limits - प्रशासनिक सीमाएँ"],
        answer: [1], exp: "Subject का mood आमतौर पर स्तरों की संख्या को प्रभावित नहीं करता।" },

      { q: "Which of the following enables a systematic analysis approach? <br>निम्नलिखित में से कौन एक systematic analysis approach को सक्षम करता है?",
        options: ["Interviews - साक्षात्कार","Customer Journey Mapping - कस्टमर जर्नी मैपिंग","Conflict of Interest - हितों का टकराव","Multi-Why Analysis - मल्टी-व्हाई विश्लेषण"],
        answer: [3], exp: "Multi-Why analysis एक systematic analysis तरीका देता है।" },

      { q: "Portos' tailor's problem was: <br>Portos के दर्जी की समस्या क्या थी?",
        options: ["Tailor not fashionable - दर्जी फैशनेबल नहीं","Portos wanted fitting but tailor couldn't touch - Portos fitting चाहता था पर दर्जी छू नहीं सकता था","Needed stain-free - दाग रहित चाहिए था","Tailor had many women - दर्जी के पास कई महिलाएँ थीं"],
        answer: [1], exp: "Portos को fitting चाहिए था पर दर्जी छू नहीं सकता था — इसलिए fitting problem थी।" },

      { q: "The most important characteristic of design thinkers is: <br>डिज़ाइन थिंकर का सबसे महत्वपूर्ण गुण क्या है?",
        options: ["Financial skills - वित्तीय कौशल","Sales skills - बिक्री कौशल","People skills - लोगों के साथ काम करना (People skills)","Arithmetic skills - गणितीय कौशल"],
        answer: [2], exp: "People skills/design thinking में सबसे महत्वपूर्ण हैं।" },

      { q: "Example of Inventive Principle of Preliminary Action: <br>Preliminary Action का उदाहरण कौन सा है?",
        options: ["Sterilization of all instruments needed for a surgical procedure on a sealed tray - सर्जिकल उपकरणों की पहले से स्टरलाइजेशन","Make a diamond cutting tool out of diamonds - हीरों से कटिंग टूल बनाना","To loosen stuck parts, cool inner part - जमे हिस्सों को ढीला करने के लिए अंदरूनी हिस्से को ठंडा करना","Mountain proverb - पहाड़ी कहावत"],
        answer: [0], exp: "Sterilization पहले से करना Preliminary Action का अच्छा उदाहरण है।" },

      { q: "Inventive Principle of Beforehand Cushioning means: <br>Beforehand Cushioning से क्या मतलब है?",
        options: ["Identify end users - अंतिम उपयोगकर्ता की पहचान","Prepare emergency means beforehand - आपात स्थिति के उपाय पहले से तैयार रखना","Do in advance - पहले से करना","Systematic approach - व्यवस्थित दृष्टिकोण"],
        answer: [1], exp: "Beforehand cushioning मतलब emergency के लिए पहले से उपाय तैयार रखना।" },

      { q: "In Karmic Design Thinking, which methodology gives a very useful experience? <br>कर्मिक डिज़ाइन थिंकिंग में कौन सी पद्धति बहुत उपयोगी अनुभव देती है?",
        options: ["ARIZ","CPS","Six Thinking Hats","Analytic Reading"],
        answer: [0], exp: "ARIZ (Algorithm of Inventive Problem Solving) उपयोगी है।" },

      { q: "The heart of TRIZ is composed of: <br>TRIZ का मूल (heart) किससे मिलकर बना है?",
        options: ["Silent brainstorming - मौन विचार-विमर्श","Inventive principles & Innovation algorithm - आविष्कारक सिद्धांत और नवाचार एल्गोरिथ्म","Just in time - ठीक समय पर","Contradictions & Inventive principles - विरोधाभास और आविष्कारक सिद्धांत"],
        answer: [3], exp: "TRIZ का मूल Contradictions और Inventive principles हैं।" },

      { q: "Chocolate packaging solutions should: <br>चॉकलेट पैकेजिंग के समाधान को क्या करना चाहिए?",
        options: ["Withstand temperature change - तापमान परिवर्तन सहना","Lightweight - हल्का होना","Temper below 24C - 24C से नीचे रखना","Maintain 75F for 48h - 48 घंटे के लिए 75F बनाए रखना"],
        answer: [0,1,3], exp: "पैकेजिंग को तापमान सहन, हल्का और कुछ प्रतिबंधों के साथ बनाए रखना चाहिए।" },

      { q: "Inventive principle used to solve worn-out tyres problem in aircraft: <br>विमान में घिसे हुए टायर के समस्या का समाधान किस सिद्धांत से किया गया?",
        options: ["Thermal expansion - तापीय विस्तार","Pneumatics - न्यूमैटिक्स","Prior action - पूर्व कार्य","Other way round - दूसरी दिशा में विचार करना"],
        answer: [3], exp: "विचार 'other way round' से समस्या का समाधान किया गया।" },

      { q: "Solve is considered to be the ________ phase in Design Thinking. <br>Solve किस प्रकार का चरण माना जाता है?",
        options: ["Free-flowing - मुक्तधारा","Convergent - संग्रहीत","Congruent - संगत","Divergent - विभाजनकारी"],
        answer: [3], exp: "Solve phase अक्सर divergent प्रक्रिया है।" },

      { q: "While generating solutions in Solve phase, we should: <br>Solve चरण में समाधान उत्पन्न करते समय हमें क्या करना चाहिए?",
        options: ["Focus on one - एक पर ध्यान केंद्रित करें","Always check back - बार-बार वापस जाँच करें","Ensure both sides - दोनों पक्ष सुनिश्चित करें","Jump into building - सीधे निर्माण में कूद जाएँ"],
        answer: [1,2], exp: "Solutions generate करते समय बार-बार जाँच और दोनों पक्षों की जाँच आवश्यक है।" },

      { q: "TRIZ is the theory of: <br>TRIZ किसका सिद्धांत है?",
        options: ["i, ii only","i, ii, iii only","ii, iii only","i, ii, iii and iv"],
        answer: [3], exp: "TRIZ कई सिद्धांतों का समावेश है — (i, ii, iii और iv)।" },

      { q: "When should a design thinker work towards making a prototype? <br>डिज़ाइन थिंकर कब प्रोटोटाइप बनाने की ओर काम करना चाहिए?",
        options: ["After conflicts - संघर्षों के बाद","After journey mapping - जर्नी मैपिंग के बाद","After EAS stages - EAS चरणों के बाद","After TRIZ - TRIZ के बाद"],
        answer: [2], exp: "Prototype तब बनाना चाहिए जब EAS (Empathize/Analyze/Solve) stages पूरी तरह समझ में आ जाएँ।" },

      { q: "What materials qualify for prototyping? <br>प्रोटोटाइप के लिए कौन सी सामग्री योग्य हैं?",
        options: ["Clothes - कपड़े","Cardboards - कार्डबोर्ड","Softwares - सॉफ़्टवेयर","All of the above - ऊपर के सभी"],
        answer: [3], exp: "प्रोटोटाइप किसी भी सामग्रियों से बनाया जा सकता है — कपड़े, कार्डबोर्ड, सॉफ़्टवेयर आदि।" },

      { q: "What is the correct way to treat a prototype? <br>प्रोटोटाइप के साथ सही तरीका क्या है?",
        options: ["Mass-produce - बड़े पैमाने पर बनाना","Test with group - समूह के साथ परीक्षण करना","Keep in lab - प्रयोगशाला में रखना","Test yourself - स्वयं परीक्षण करना"],
        answer: [1], exp: "प्रोटोटाइप को समूह के साथ टेस्ट कर feedback लेना चाहिए।" },

      { q: "Correct order of activities in Test Stage: <br>Test चरण में गतिविधियों का सही क्रम क्या है?",
        options: ["Launch → Market response → Alter","Approve → Launch → Advertise","Prototype → Feedback → Change → Launch","Hype → Launch → Earn"],
        answer: [2], exp: "सही क्रम: Prototype → Feedback → Change → Launch।" },

      { q: "True or False: You should not go back to E, A or S after reaching Test Stage. <br>सत्य या असत्य: Test चरण तक पहुँचने के बाद E, A या S पर वापस नहीं जाना चाहिए।",
        options: ["True - सही","False - ग़लत"],
        answer: [1], exp: "गलत — जरूरत होने पर फिर से E/A/S पर वापस जा सकते हैं।" },

      { q: "Test is considered to be ________ phase in design thinking. <br>Design Thinking में Test किस प्रकार का चरण माना जाता है?",
        options: ["Divergent - विभाजनकारी","Convergent - संग्रहीत","Open-ended - खुला","Open-source - खुला स्रोत"],
        answer: [1], exp: "Test stage आमतौर पर convergent phase है।" },

      { q: "While testing a prototype, what should you NOT do? <br>प्रोटोटाइप का परीक्षण करते समय आपको क्या नहीं करना चाहिए?",
        options: ["Let users compare - उपयोगकर्ताओं को तुलना करने दें","Ask users talk - उपयोगकर्ताओं से बात करवाएँ","Explain at length - लंबागीरी से समझाएँ","Show, don’t tell - दिखाएँ, बताएं नहीं"],
        answer: [2], exp: "Users को लंबे-लंबे डिटेल में explain करने की बजाय दिखाना बेहतर है — 'Show, don't tell'।" },

      { q: "Wrong way of setting a target customer: <br>टार्गेट ग्राहक तय करने का गलत तरीका कौन सा है?",
        options: ["Check competition - प्रतियोगिता देखें","Analyze product - उत्पाद का विश्लेषण करें","Analyze demographics - जनसांख्यिकी का विश्लेषण करें","Assume based on team - टीम के आधार पर अनुमान लगाना"],
        answer: [3], exp: "केवल टीम के अनुमान पर ग्राहक तय करना गलत है।" },

      { q: "If prototype succeeds in test run, will it guarantee success in market? <br>यदि प्रोटोटाइप परीक्षण में सफल रहा तो क्या यह बाजार में सफलता की गारंटी है?",
        options: ["Yes - हाँ","No - नहीं","Highly likely but not guaranteed - बहुत सम्भावित पर गारंटी नहीं","Cannot know - पता नहीं"],
        answer: [2], exp: "टेस्ट में सफलता market success की गारंटी नहीं देती — पर संभावना बढ़ सकती है।" },

      { q: "Which noble truth is mapped to Test phase in Design Thinking? <br>डिज़ाइन थिंकिंग में किस noble truth को Test चरण से जोड़ा गया है?",
        options: ["Nirodha","Samudaya","Marga","Dukkh"],
        answer: [2], exp: "Test phase को 'Marga' (मार्ग) से जोड़ा जाता है।" }
    ];

    // Note: The above array contains 40 entries as required.
    // (It uses the user's supplied full list of 1-40 Qs/answers/explanations.)

    // Render quiz
    const form = document.getElementById('quizForm');

    function renderQuestions(list) {
      form.innerHTML = "";
      list.forEach((qObj, idx) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question';
        qDiv.dataset.index = idx;
        // Title
        const title = document.createElement('div');
        title.className = 'qtitle';
        title.innerHTML = `<span style="color:#333">Q${idx+1}.</span> ${qObj.q}`;
        qDiv.appendChild(title);

        // Options
        const optsDiv = document.createElement('div');
        optsDiv.className = 'options';
        qObj.options.forEach((opt, j) => {
          const label = document.createElement('label');
          label.className = 'option-neutral';
          label.dataset.optIndex = j;

          const input = document.createElement('input');
          input.type = 'checkbox';
          input.name = `q${idx}`;
          input.value = j;
          input.dataset.qidx = idx;

          label.appendChild(input);
          const span = document.createElement('span');
          span.innerHTML = opt;
          label.appendChild(span);
          optsDiv.appendChild(label);
        });
        qDiv.appendChild(optsDiv);

        // Placeholder for explanation after submit
        const explainDiv = document.createElement('div');
        explainDiv.className = 'explain small';
        explainDiv.style.display = 'none';
        explainDiv.innerHTML = '';
        qDiv.appendChild(explainDiv);

        form.appendChild(qDiv);
      });
    }

    // initial render
    renderQuestions(questions);

    // Utility to disable/enable inputs
    function setInputsDisabled(disabled) {
      const inputs = form.querySelectorAll('input[type="checkbox"]');
      inputs.forEach(i => i.disabled = disabled);
    }

    // Submit handling
    document.getElementById('submitBtn').addEventListener('click', () => {
      // Evaluate
      let score = 0;
      const total = questions.length;
      const perResults = [];

      // For each question, gather selected indices
      const qDivs = form.querySelectorAll('.question');
      qDivs.forEach(qDiv => {
        const idx = parseInt(qDiv.dataset.index, 10);
        const qObj = questions[idx];
        const checked = [...qDiv.querySelectorAll('input[type="checkbox"]:checked')].map(i => parseInt(i.value, 10));
        const correct = Array.isArray(qObj.answer) ? qObj.answer.slice().sort((a,b)=>a-b) : [qObj.answer];

        // Compare selected & correct (order invariant)
        const selSorted = checked.slice().sort((a,b)=>a-b);

        const isCorrect = (selSorted.length > 0) && (selSorted.toString() === correct.toString());
        if (isCorrect) score++;

        // Color each option:
        const labels = qDiv.querySelectorAll('.options label');
        labels.forEach(label => {
          const optIndex = parseInt(label.dataset.optIndex, 10);
          label.classList.remove('option-correct','option-wrong','option-neutral');
          // If user selected this
          const userSelected = selSorted.includes(optIndex);
          const isActuallyCorrect = correct.includes(optIndex);

          if (userSelected && isActuallyCorrect) {
            label.classList.add('option-correct'); // selected and correct -> green
          } else if (userSelected && !isActuallyCorrect) {
            label.classList.add('option-wrong');   // selected but wrong -> red
          } else if (!userSelected && isActuallyCorrect) {
            // not selected but correct -> highlight lightly to show correct answer
            label.classList.add('option-correct');
            // make it a little paler (same class is fine)
          } else {
            label.classList.add('option-neutral');
          }
        });

        // Show explanation
        const expl = qDiv.querySelector('.explain');
        const correctText = correct.map(i => qObj.options[i]).join(', ');
        expl.style.display = 'block';
        expl.innerHTML = `<div><strong>Correct:</strong> ${correctText}</div><div style="margin-top:6px;">${qObj.exp}</div>`;
        perResults.push(isCorrect);
      });

      // Disable inputs after submit
      setInputsDisabled(true);

      // Show summary
      const summary = document.getElementById('resultSummary');
      summary.style.display = 'block';
      summary.innerHTML = `Your Score: ${score}/${total} — ${Math.round(score/total*100)}%<br><span style="font-weight:normal; color:#333; margin-top:6px; display:block;">Green = correct, Red = your incorrect selections. Explanation shown in Hindi.</span>`;

    });

    // Retry wrong
    document.getElementById('retryBtn').addEventListener('click', () => {
      // Collect wrong Qs based on selected answers so far
      const wrongQs = [];
      const qDivs = form.querySelectorAll('.question');
      qDivs.forEach(qDiv => {
        const idx = parseInt(qDiv.dataset.index, 10);
        const qObj = questions[idx];
        const checked = [...qDiv.querySelectorAll('input[type="checkbox"]:checked')].map(i => parseInt(i.value, 10));
        const correct = Array.isArray(qObj.answer) ? qObj.answer.slice().sort((a,b)=>a-b) : [qObj.answer];
        const selSorted = checked.slice().sort((a,b)=>a-b);
        const isCorrect = (selSorted.length > 0) && (selSorted.toString() === correct.toString());
        if (!isCorrect) wrongQs.push(qObj);
      });

      if (wrongQs.length === 0) {
        alert('सभी उत्तर सही हैं या आपने कुछ भी नहीं सलेक्ट किया — कोई गलत प्रश्न नहीं।');
        return;
      }

      // Replace questions array content with wrong ones and re-render
      questions.splice(0, questions.length, ...wrongQs);
      renderQuestions(questions);
      document.getElementById('resultSummary').style.display = 'none';
    });

    // Reset: reload the original full set
    document.getElementById('resetBtn').addEventListener('click', () => {
      // Rebuild the original questions array (we'll reload page-like behavior)
      // To reset, simply reload the page to restore original data (simplest and safest)
      location.reload();
    });

    // UX: if user changes inputs after re-render, keep summary hidden
    form.addEventListener('change', () => {
      document.getElementById('resultSummary').style.display = 'none';
    });
  </script>
</body>
</html>
